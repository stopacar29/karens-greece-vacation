# Deploy to Render.com so family can open one URL to use the app.
# See DEPLOYMENT.md for step-by-step.
services:
  - type: web
    runtime: node
    name: karens-greece-trip
    # All from repo root: install and build web-app, then install server deps into server/node_modules
    buildCommand: npm install --prefix web-app && npm run build --prefix web-app && npm install --prefix server
    # Run from server/ so Node finds server/node_modules (no separate script file needed)
    startCommand: cd server && node index.js
    healthCheckPath: /health
    envVars:
      - key: OPENAI_API_KEY
        sync: false
        # Add your key in Render Dashboard for PDF/OCR import (optional)
